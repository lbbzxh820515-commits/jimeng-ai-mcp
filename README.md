# å³æ¢¦AIå¤šæ¨¡æ€MCP

è¿™æ˜¯ä¸€ä¸ªåŸºäºç«å±±å¼•æ“å³æ¢¦AIçš„å¤šæ¨¡æ€ç”ŸæˆæœåŠ¡ï¼Œæ”¯æŒå›¾åƒç”Ÿæˆã€è§†é¢‘ç”Ÿæˆç­‰åŠŸèƒ½ï¼Œå¯é€šè¿‡MCPåè®®åœ¨Cursorã€Claude Desktopç­‰MCPå®¢æˆ·ç«¯ä¸­ä½¿ç”¨ï¼Œä¹Ÿå¯ä½œä¸ºç‹¬ç«‹åº“è°ƒç”¨ã€‚æ”¯æŒ macOSã€Linuxã€Windows åŠ WSL ç¯å¢ƒã€‚

## ç‰ˆæœ¬æ›´æ–°

### v1.0.14
- å¢å¼ºMCPå·¥å…·å®šä¹‰ï¼Œç¡®ä¿æ‰€æœ‰å·¥å…·åœ¨å®¢æˆ·ç«¯å¯è§
- ä¼˜åŒ–å¼‚æ­¥å‚æ•°å¤„ç†ï¼Œé»˜è®¤å¯ç”¨å¼‚æ­¥æ¨¡å¼é¿å…è¶…æ—¶
- å¢åŠ æ›´è¯¦ç»†çš„è§†é¢‘ç”Ÿæˆè°ƒè¯•ä¿¡æ¯

### v1.0.9-beta.1
- æµ‹è¯•ç‰ˆï¼šå¢å¼ºMCPå·¥å…·å®šä¹‰ï¼Œç¡®ä¿æ‰€æœ‰å·¥å…·åœ¨å®¢æˆ·ç«¯å¯è§
- ä¼˜åŒ–å¼‚æ­¥å‚æ•°å¤„ç†ï¼Œé»˜è®¤å¯ç”¨å¼‚æ­¥æ¨¡å¼é¿å…è¶…æ—¶
- å¢åŠ æ›´è¯¦ç»†çš„è§†é¢‘ç”Ÿæˆè°ƒè¯•ä¿¡æ¯
- ä¿®å¤å·¥å…·å‚æ•°ä¼ é€’é—®é¢˜

### v1.0.5
- ä¼˜åŒ–æ–‡æ¡£ç»“æ„ï¼Œä¸ºä¸åŒå¹³å°æä¾›æ¸…æ™°é…ç½®è¯´æ˜
- å¢åŠ  PowerShell é…ç½®ç¤ºä¾‹
- æä¾›å„å¹³å°æ°¸ä¹…ç¯å¢ƒå˜é‡è®¾ç½®æ–¹æ³•
- æ·»åŠ å¤šå¹³å°é…ç½®æ³¨æ„äº‹é¡¹

### v1.0.4
- ä¼˜åŒ–æœåŠ¡å¯åŠ¨å’Œå“åº”è¿”å›ï¼Œç°åœ¨æ‰€æœ‰å“åº”å‡ä½¿ç”¨æ ‡å‡†JSONæ ¼å¼
- ç»Ÿä¸€é”™è¯¯å¤„ç†å’ŒæˆåŠŸå“åº”çš„æ•°æ®ç»“æ„
- å¢å¼ºé”™è¯¯ä¿¡æ¯çš„å¯è¯»æ€§å’Œå¯è§£ææ€§

## æ ¸å¿ƒåŠŸèƒ½

- âœ… **æ–‡ç”Ÿå›¾** - é€šè¿‡æ–‡æœ¬æè¿°ç”Ÿæˆé«˜è´¨é‡å›¾åƒ (æ¨¡å‹: jimeng_t2i_s20pro)
- âœ… **æ–‡ç”Ÿè§†é¢‘** - å°†æ–‡æœ¬æè¿°è½¬æ¢ä¸ºæµç•…è§†é¢‘ (æ¨¡å‹: jimeng_vgfm_t2v_l20)
- âœ… **å›¾ç”Ÿè§†é¢‘** - å°†é™æ€å›¾åƒè½¬æ¢ä¸ºåŠ¨æ€è§†é¢‘ (æ¨¡å‹: jimeng_vgfm_i2v_l20)
- âœ… **å¤šå¹³å°æ”¯æŒ** - æ”¯æŒ macOSã€Linuxã€Windows åŠ WSL ç¯å¢ƒ
- ğŸ› ï¸ å®Œæ•´TypeScriptç±»å‹å®šä¹‰å’Œé”™è¯¯å¤„ç†
- ğŸ”„ æ”¯æŒå¼‚æ­¥ä»»åŠ¡å¤„ç†å’ŒçŠ¶æ€è¿½è¸ª
- ğŸ›ï¸ è‡ªå®šä¹‰å‚æ•°æ§åˆ¶ (å°ºå¯¸ã€æ¯”ä¾‹ã€å¸§æ•°ç­‰)

## å¯ç”¨MCPå·¥å…·

| å·¥å…·åç§° | æè¿° | ä¸»è¦å‚æ•° |
|---------|------|---------|
| `generate-image` | ç”Ÿæˆå›¾åƒ | text, illustration, color, ratio |
| `generate-video` | ç”Ÿæˆè§†é¢‘ | prompt, async, intent_sync |
| `submit-video-task` | æäº¤è§†é¢‘ç”Ÿæˆä»»åŠ¡ | prompt |
| `get-video-task` | è·å–è§†é¢‘ä»»åŠ¡ç»“æœ | task_id |

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

æ‰€æœ‰å¹³å°ï¼ˆmacOS/Linux/Windowsï¼‰ï¼š

```bash
# NPMå…¨å±€å®‰è£…
npm install -g jimeng-ai-mcp

# æˆ–æœ¬åœ°å®‰è£…
git clone https://github.com/freeleepm/jimeng-ai-mcp.git
cd jimeng-mcp
npm install
npm run build
```

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ä½¿ç”¨å‰ï¼Œéœ€è®¾ç½®ç«å±±å¼•æ“å³æ¢¦AIæœåŠ¡çš„è®¿é—®å¯†é’¥ï¼š

#### macOS/Linux

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export JIMENG_ACCESS_KEY=ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥
export JIMENG_SECRET_KEY=ä½ çš„ç«å±±å¼•æ“å¯†é’¥

# æˆ–åˆ›å»º.envæ–‡ä»¶
echo "JIMENG_ACCESS_KEY=ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥" > .env
echo "JIMENG_SECRET_KEY=ä½ çš„ç«å±±å¼•æ“å¯†é’¥" >> .env

# æ°¸ä¹…è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆæ·»åŠ åˆ° .bashrc æˆ– .zshrcï¼‰
echo 'export JIMENG_ACCESS_KEY="ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥"' >> ~/.bashrc
echo 'export JIMENG_SECRET_KEY="ä½ çš„ç«å±±å¼•æ“å¯†é’¥"' >> ~/.bashrc
source ~/.bashrc
```

#### WSL (Windows Subsystem for Linux)

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export JIMENG_ACCESS_KEY=ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥
export JIMENG_SECRET_KEY=ä½ çš„ç«å±±å¼•æ“å¯†é’¥

# æˆ–åˆ›å»º.envæ–‡ä»¶
echo "JIMENG_ACCESS_KEY=ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥" > .env
echo "JIMENG_SECRET_KEY=ä½ çš„ç«å±±å¼•æ“å¯†é’¥" >> .env

# æ°¸ä¹…è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆæ·»åŠ åˆ° .bashrcï¼‰
echo 'export JIMENG_ACCESS_KEY="ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥"' >> ~/.bashrc
echo 'export JIMENG_SECRET_KEY="ä½ çš„ç«å±±å¼•æ“å¯†é’¥"' >> ~/.bashrc
source ~/.bashrc
```

#### Windows

å‘½ä»¤æç¤ºç¬¦ (CMD):
```cmd
:: ä¸´æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå½“å‰ä¼šè¯æœ‰æ•ˆï¼‰
set JIMENG_ACCESS_KEY=ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥
set JIMENG_SECRET_KEY=ä½ çš„ç«å±±å¼•æ“å¯†é’¥

:: åˆ›å»º.envæ–‡ä»¶
echo JIMENG_ACCESS_KEY=ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥ > .env
echo JIMENG_SECRET_KEY=ä½ çš„ç«å±±å¼•æ“å¯†é’¥ >> .env

:: æ°¸ä¹…è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆç®¡ç†å‘˜å‘½ä»¤æç¤ºç¬¦ï¼‰
setx JIMENG_ACCESS_KEY "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥"
setx JIMENG_SECRET_KEY "ä½ çš„ç«å±±å¼•æ“å¯†é’¥"
```

PowerShell:
```powershell
# ä¸´æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå½“å‰ä¼šè¯æœ‰æ•ˆï¼‰
$env:JIMENG_ACCESS_KEY = "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥"
$env:JIMENG_SECRET_KEY = "ä½ çš„ç«å±±å¼•æ“å¯†é’¥"

# åˆ›å»º.envæ–‡ä»¶
"JIMENG_ACCESS_KEY=ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥" | Out-File -FilePath .env -Encoding ASCII
"JIMENG_SECRET_KEY=ä½ çš„ç«å±±å¼•æ“å¯†é’¥" | Out-File -FilePath .env -Encoding ASCII -Append

# æ°¸ä¹…è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆç®¡ç†å‘˜PowerShellï¼‰
[Environment]::SetEnvironmentVariable("JIMENG_ACCESS_KEY", "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥", "User")
[Environment]::SetEnvironmentVariable("JIMENG_SECRET_KEY", "ä½ çš„ç«å±±å¼•æ“å¯†é’¥", "User")
```

## å‘å¸ƒä¸ç‰ˆæœ¬ç®¡ç†

é¡¹ç›®åŒ…å«ä¸€ä¸ª `publish.sh` è„šæœ¬ï¼Œç”¨äºç®€åŒ–ç‰ˆæœ¬å‘å¸ƒå’Œç®¡ç†çš„æµç¨‹ã€‚

### ä½¿ç”¨æ–¹æ³•

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œè„šæœ¬ï¼š

```bash
./publish.sh
```

è„šæœ¬ä¼šæä¾›ä¸€ä¸ªèœå•ï¼Œå¼•å¯¼ä½ å®Œæˆä¸åŒæ“ä½œã€‚

### åŠŸèƒ½é€‰é¡¹

1.  **å‘å¸ƒæ–°ç‰ˆæœ¬ (é€‰é¡¹ 1-5)**:
    *   **patch**: ç”¨äºä¿®å¤é”™è¯¯ (ä¾‹å¦‚ `1.0.4` -> `1.0.5`)ã€‚
    *   **minor**: ç”¨äºæ·»åŠ å‘åå…¼å®¹çš„åŠŸèƒ½ (ä¾‹å¦‚ `1.0.4` -> `1.1.0`)ã€‚
    *   **major**: ç”¨äºä¸å‘åå…¼å®¹çš„é‡å¤§æ›´æ”¹ (ä¾‹å¦‚ `1.0.4` -> `2.0.0`)ã€‚
    *   **beta**: åˆ›å»ºæˆ–é€’å¢ä¸€ä¸ªæµ‹è¯•ç‰ˆæœ¬ (ä¾‹å¦‚ `1.0.4` -> `1.0.5-beta.0` æˆ– `1.0.5-beta.0` -> `1.0.5-beta.1`)ã€‚
    *   **è‡ªå®šä¹‰ç‰ˆæœ¬**: æ‰‹åŠ¨è¾“å…¥ä¸€ä¸ªæ–°ç‰ˆæœ¬å·ã€‚

    é€‰æ‹©è¿™äº›é€‰é¡¹åï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
    *   æ£€æŸ¥æœªæäº¤çš„ Git æ›´æ”¹ã€‚
    *   æ›´æ–° `package.json`ã€`mcp.json`ã€`examples/mcp-server.ts` å’Œ `README.md` ä¸­çš„ç‰ˆæœ¬å·ã€‚
    *   æ„å»ºé¡¹ç›®ã€‚
    *   å‘å¸ƒåˆ° npmï¼ˆbeta ç‰ˆæœ¬ä¼šä½¿ç”¨ `beta` æ ‡ç­¾ï¼‰ã€‚
    *   æäº¤ç‰ˆæœ¬æ›´æ–°å¹¶åˆ›å»º Git æ ‡ç­¾ã€‚

2.  **å–æ¶ˆå‘å¸ƒç‰ˆæœ¬ (é€‰é¡¹ 6)**:
    *   è¿™æ˜¯ä¸€ä¸ª**å±é™©æ“ä½œ**ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚
    *   è„šæœ¬ä¼šè¦æ±‚ä½ è¾“å…¥éœ€è¦å–æ¶ˆå‘å¸ƒçš„ç‰ˆæœ¬å·ï¼Œæ”¯æŒ**è¾“å…¥å¤šä¸ªç‰ˆæœ¬å·**ï¼ˆç”¨ç©ºæ ¼éš”å¼€ï¼‰ã€‚
    *   åœ¨æ‰§è¡Œ `npm unpublish` å‰ï¼Œä¼šè¦æ±‚äºŒæ¬¡ç¡®è®¤ã€‚
    *   **æ³¨æ„**: npm ç­–ç•¥é€šå¸¸åªå…è®¸åœ¨å‘å¸ƒåçš„72å°æ—¶å†…å–æ¶ˆå‘å¸ƒã€‚

## MCPå®¢æˆ·ç«¯é…ç½®

### Cursoré…ç½®

#### macOS/Linux

åœ¨Cursoré…ç½®ç›®å½•ä¸­åˆ›å»º`mcp-config.json`æ–‡ä»¶ï¼š

```json
{
  "mcpServers": {
    "jimeng": {
      "type": "stdio",
      "command": "npx",
      "args": [
        "-y",
        "jimeng-ai-mcp"
      ],
      "env": {
        "JIMENG_ACCESS_KEY": "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥",
        "JIMENG_SECRET_KEY": "ä½ çš„ç«å±±å¼•æ“å¯†é’¥"
      }
    }
  }
}
```

#### Windows

åœ¨Cursoré…ç½®ç›®å½•ä¸­åˆ›å»º`mcp-config.json`æ–‡ä»¶ï¼š

```json
{
  "mcpServers": {
    "jimeng": {
      "type": "stdio",
      "command": "npx",
      "args": [
        "-y",
        "jimeng-ai-mcp"
      ],
      "env": {
        "JIMENG_ACCESS_KEY": "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥",
        "JIMENG_SECRET_KEY": "ä½ çš„ç«å±±å¼•æ“å¯†é’¥"
      }
    }
  }
}
```

#### WSL (Windows Subsystem for Linux)

åœ¨Cursoré…ç½®ç›®å½•ä¸­åˆ›å»º`mcp-config.json`æ–‡ä»¶ï¼š

```json
{
  "mcpServers": {
    "jimeng": {
      "type": "stdio",
      "command": "cmd",
      "args": [
        "/c",
        "npx",
        "-y",
        "jimeng-ai-mcp"
      ],
      "env": {
        "JIMENG_ACCESS_KEY": "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥",
        "JIMENG_SECRET_KEY": "ä½ çš„ç«å±±å¼•æ“å¯†é’¥"
      }
    }
  }
}
```

> æ³¨æ„ï¼šWSLç¯å¢ƒä¸‹éœ€è¦ä½¿ç”¨`cmd /c`å‰ç¼€æ¥ç¡®ä¿å‘½ä»¤æ­£ç¡®æ‰§è¡Œã€‚

### Claude Desktopé…ç½®

#### macOS/Linux

åœ¨Claude Desktopçš„é…ç½®æ–‡ä»¶`claude_desktop_config.json`ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "jimeng": {
      "command": "npx",
      "args": [
        "-y",
        "jimeng-ai-mcp"
      ],
      "env": {
        "JIMENG_ACCESS_KEY": "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥",
        "JIMENG_SECRET_KEY": "ä½ çš„ç«å±±å¼•æ“å¯†é’¥"
      }
    }
  }
}
```

#### Windows

åœ¨Claude Desktopçš„é…ç½®æ–‡ä»¶`claude_desktop_config.json`ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "jimeng": {
      "command": "npx",
      "args": [
        "-y",
        "jimeng-ai-mcp"
      ],
      "env": {
        "JIMENG_ACCESS_KEY": "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥",
        "JIMENG_SECRET_KEY": "ä½ çš„ç«å±±å¼•æ“å¯†é’¥"
      }
    }
  }
}
```

#### WSL (Windows Subsystem for Linux)

åœ¨Claude Desktopçš„é…ç½®æ–‡ä»¶`claude_desktop_config.json`ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "jimeng": {
      "command": "cmd",
      "args": [
        "/c",
        "npx",
        "-y",
        "jimeng-ai-mcp"
      ],
      "env": {
        "JIMENG_ACCESS_KEY": "ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥",
        "JIMENG_SECRET_KEY": "ä½ çš„ç«å±±å¼•æ“å¯†é’¥"
      }
    }
  }
}
```

### é…ç½®æ³¨æ„äº‹é¡¹

- **macOS/Linux**: ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ç¯å¢ƒå˜é‡å’Œè·¯å¾„ã€‚
- **Windows**: 
  - å¦‚æœé‡åˆ°è·¯å¾„é—®é¢˜ï¼Œè¯·æ£€æŸ¥å‘½ä»¤è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œå¿…è¦æ—¶ä½¿ç”¨å®Œæ•´è·¯å¾„ã€‚
  - å¦‚æœä½¿ç”¨å…¨å±€å®‰è£…ï¼Œå¯å°† `npx -y jimeng-ai-mcp` æ”¹ä¸º `jimeng-ai-mcp` å‘½ä»¤ã€‚
- **WSL (Windows Subsystem for Linux)**: 
  - åœ¨ WSL ç¯å¢ƒä¸­ï¼Œå¿…é¡»ä½¿ç”¨ `cmd /c` å‰ç¼€æ¥ç¡®ä¿å‘½ä»¤æ­£ç¡®æ‰§è¡Œã€‚
  - è¯·ç¡®ä¿ Windows ç«¯å·²æ­£ç¡®å®‰è£… Node.js å’Œ npmã€‚

## å·¥å…·ä½¿ç”¨ç¤ºä¾‹

åœ¨æ”¯æŒ MCP çš„å®¢æˆ·ç«¯ï¼ˆå¦‚ Cursorã€Claude Desktopï¼‰ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è°ƒç”¨å³æ¢¦AIå·¥å…·ï¼š

### ç”Ÿæˆå›¾åƒç¤ºä¾‹

```
è¯·ä½¿ç”¨generate-imageå·¥å…·ç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡ä¸Šæ˜¾ç¤º"åˆ›æ–°æœªæ¥"æ–‡å­—ï¼Œé…é¥°å…ƒç´ åŒ…æ‹¬ç§‘æŠ€ã€æ˜Ÿç©ºã€å…‰çº¿ï¼ŒèƒŒæ™¯è‰²è°ƒä¸ºè“è‰²ï¼Œæ¯”ä¾‹ä¸º16:9ã€‚
```

### ç”Ÿæˆè§†é¢‘ç¤ºä¾‹

```
è¯·ä½¿ç”¨generate-videoå·¥å…·ç”Ÿæˆä¸€æ®µè§†é¢‘ï¼Œè§†é¢‘å†…å®¹ä¸º"ç†ŠçŒ«åœ¨ç«¹æ—ä¸­ç©è€ï¼Œé˜³å…‰æ˜åªšï¼Œé«˜æ¸…å†™å®é£æ ¼"ã€‚
```

### å¼‚æ­¥è§†é¢‘ä»»åŠ¡ç¤ºä¾‹

```
è¯·ä½¿ç”¨submit-video-taskå·¥å…·æäº¤ä¸€ä¸ªè§†é¢‘ç”Ÿæˆä»»åŠ¡ï¼Œè§†é¢‘å†…å®¹ä¸º"ä¸€åªç™½è‰²çš„å°çŒªåœ¨æ²™æ»©ä¸Šè·‘åŠ¨"ã€‚æäº¤åä½¿ç”¨get-video-taskå·¥å…·æŸ¥è¯¢ç»“æœã€‚
```

## å¸¸è§é—®é¢˜ä¸æ•…éšœæ’é™¤

### 1. æ— æ³•é€šè¿‡ npx å®‰è£…æˆ–è¿è¡Œ

å¦‚æœé‡åˆ° `npx jimeng-ai-mcp` æ— æ³•æ‰¾åˆ°åŒ…çš„é—®é¢˜ï¼Œè¯·å°è¯•ï¼š

- ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œèƒ½å¤Ÿè®¿é—® npm ä»“åº“
- ä½¿ç”¨ `npm install -g jimeng-ai-mcp` å…ˆå…¨å±€å®‰è£…ï¼Œå†ä½¿ç”¨ `jimeng-ai-mcp` å‘½ä»¤
- æ£€æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦æ»¡è¶³è¦æ±‚ (éœ€è¦ v14.0.0 æˆ–æ›´é«˜ç‰ˆæœ¬)

### 2. ç¯å¢ƒå˜é‡é—®é¢˜

- ç¡®ä¿å·²æ­£ç¡®è®¾ç½® `JIMENG_ACCESS_KEY` å’Œ `JIMENG_SECRET_KEY` ç¯å¢ƒå˜é‡
- åœ¨ MCP å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦é…ç½®è¿™äº›ç¯å¢ƒå˜é‡
- å¯ä»¥é€šè¿‡åˆ›å»º .env æ–‡ä»¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆé¡¹ç›®æä¾›äº† .env.example ä½œä¸ºå‚è€ƒï¼Œç¡®ä¿æ–‡ä»¶ä½äºå·¥ä½œç›®å½•ï¼‰

### 3. å¤šå¹³å°å…¼å®¹æ€§

- Windows ç”¨æˆ·å¯èƒ½éœ€è¦è°ƒæ•´è·¯å¾„åˆ†éš”ç¬¦ï¼ˆä½¿ç”¨ `\\` æˆ– `/`ï¼‰
- WSL ç”¨æˆ·éœ€è¦ä½¿ç”¨ `cmd /c` å‰ç¼€
- ç¡®ä¿ npm åŒ…å·²æ­£ç¡®å®‰è£…åœ¨å½“å‰ç³»ç»Ÿç¯å¢ƒä¸­

## è´¡çŒ®ä¸å¼€å‘

æ¬¢è¿ä¸ºé¡¹ç›®è´¡çŒ®ä»£ç æˆ–æå‡ºæ”¹è¿›å»ºè®®ï¼ä»¥ä¸‹æ˜¯å¼€å‘æµç¨‹ï¼š

1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/freeleepm/jimeng-ai-mcp.git
cd jimeng-ai-mcp

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# å‘å¸ƒåˆ°npmï¼ˆéœ€è¦npmè´¦æˆ·æƒé™ï¼‰
npm version patch  # æ›´æ–°ç‰ˆæœ¬å·
npm publish
```

## MCPå·¥å…·ä½¿ç”¨

### generate-image

ç”Ÿæˆå›¾åƒçš„å·¥å…·ï¼Œæ ¹æ®æ–‡å­—æç¤ºç”Ÿæˆå›¾åƒã€‚

**å‚æ•°**ï¼š
- `text`: è¦åœ¨å›¾ç‰‡ä¸Šæ˜¾ç¤ºçš„æ–‡å­—
- `illustration`: ä½œä¸ºå›¾ç‰‡é…é¥°çš„æ’ç”»å…ƒç´ å…³é”®è¯
- `color`: å›¾ç‰‡çš„èƒŒæ™¯ä¸»è‰²è°ƒ
- `ratio`: å›¾ç‰‡æ¯”ä¾‹ï¼Œæ”¯æŒ: 4:3 (512Ã—384), 3:4 (384Ã—512), 16:9 (512Ã—288), 9:16 (288Ã—512)

**ç¤ºä¾‹**ï¼š
```
è¯·ä½¿ç”¨generate-imageå·¥å…·ç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼Œå›¾ç‰‡ä¸Šæ˜¾ç¤º"åˆ›æ–°æœªæ¥"æ–‡å­—ï¼Œé…é¥°å…ƒç´ åŒ…æ‹¬ç§‘æŠ€ã€æ˜Ÿç©ºã€å…‰çº¿ï¼ŒèƒŒæ™¯è‰²è°ƒä¸ºè“è‰²ï¼Œæ¯”ä¾‹ä¸º16:9ã€‚
```

### generate-video

ç”Ÿæˆè§†é¢‘çš„å·¥å…·ï¼Œä½¿ç”¨å³æ¢¦AIæ–‡ç”Ÿè§†é¢‘æ¨¡å‹ã€‚

**å‚æ•°**ï¼š
- `prompt`: è§†é¢‘å†…å®¹çš„æè¿°
- `num_frames`: è§†é¢‘å¸§æ•° (å¯é€‰ï¼Œé»˜è®¤16)
- `fps`: è§†é¢‘å¸§ç‡ (å¯é€‰ï¼Œé»˜è®¤8)

**ç¤ºä¾‹**ï¼š
```
è¯·ä½¿ç”¨generate-videoå·¥å…·ç”Ÿæˆä¸€æ®µè§†é¢‘ï¼Œè§†é¢‘å†…å®¹ä¸º"ç†ŠçŒ«åœ¨ç«¹æ—ä¸­ç©è€"ï¼Œå¸§æ•°ä¸º16ã€‚
```

### generate-image-to-video

å›¾ç”Ÿè§†é¢‘å·¥å…·ï¼Œå°†é™æ€å›¾ç‰‡è½¬æ¢ä¸ºåŠ¨æ€è§†é¢‘ã€‚

**å‚æ•°**ï¼š
- `image_urls`: è¾“å…¥å›¾ç‰‡URLæ•°ç»„ (JPEG/PNGæ ¼å¼)
- `prompt`: åŠ¨ç”»æ•ˆæœæè¿° (å¯é€‰)
- `aspect_ratio`: è§†é¢‘æ¯”ä¾‹ (å¯é€‰ï¼Œå¦‚"16:9"ã€"4:3"ç­‰ï¼Œé»˜è®¤"16:9")
- `num_frames`: è§†é¢‘å¸§æ•° (å¯é€‰ï¼Œé»˜è®¤16)
- `fps`: è§†é¢‘å¸§ç‡ (å¯é€‰ï¼Œé»˜è®¤8)

**ç¤ºä¾‹**ï¼š
```
è¯·ä½¿ç”¨generate-image-to-videoå·¥å…·ç”Ÿæˆè§†é¢‘ï¼Œè¾“å…¥å›¾ç‰‡ä¸ºhttps://example.com/image.jpgï¼Œæ•ˆæœä¸º"æ³¢æµªæ‘‡æ›³"ï¼Œæ¯”ä¾‹ä¸º"16:9"ã€‚
```

## ä½œä¸ºå®¢æˆ·ç«¯åº“ä½¿ç”¨

### åŸºæœ¬ç”¨æ³•

```typescript
import { JimengClient } from 'jimeng-ai-mcp';

// åˆ›å»ºå®¢æˆ·ç«¯å®ä¾‹
const client = new JimengClient({
  accessKey: 'YOUR_ACCESS_KEY',
  secretKey: 'YOUR_SECRET_KEY',
  region: 'cn-beijing', // é»˜è®¤åŒºåŸŸ
  debug: false // è®¾ç½®ä¸ºtrueå¯ä»¥æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
});

// æ–‡ç”Ÿå›¾ç¤ºä¾‹
async function generateImage() {
  const result = await client.generateImage({
    prompt: "ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨è‰åœ°ä¸Šç©è€",
    width: 512,
    height: 512
  });
  
  if (result.success && result.image_urls && result.image_urls.length > 0) {
    console.log('å›¾åƒURL:', result.image_urls[0]);
  } else {
    console.error('ç”Ÿæˆå¤±è´¥:', result.error);
  }
}

// æ–‡ç”Ÿè§†é¢‘ç¤ºä¾‹
async function generateVideo() {
  const result = await client.generateVideo({
    prompt: "ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨è‰åœ°ä¸Šç©è€"
  });
  
  if (result.success && result.video_urls && result.video_urls.length > 0) {
    console.log('è§†é¢‘URL:', result.video_urls[0]);
  } else {
    console.error('ç”Ÿæˆå¤±è´¥:', result.error);
  }
}

// å›¾ç”Ÿè§†é¢‘ç¤ºä¾‹
async function generateImageToVideo() {
  const result = await client.generateImageToVideo({
    image_urls: ["https://example.com/image.jpg"],
    prompt: "æ³¢æµªæ•ˆæœ",
    aspect_ratio: "16:9"
  });
  
  if (result.success && result.video_urls && result.video_urls.length > 0) {
    console.log('è§†é¢‘URL:', result.video_urls[0]);
  } else {
    console.error('ç”Ÿæˆå¤±è´¥:', result.error);
  }
}
```

### é«˜çº§ç”¨æ³•ï¼šå¼‚æ­¥ä»»åŠ¡å¤„ç†

å¯¹äºè€—æ—¶è¾ƒé•¿çš„è§†é¢‘ç”Ÿæˆä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼š

```typescript
// æ–‡ç”Ÿè§†é¢‘å¼‚æ­¥æ–¹å¼
async function generateVideoAsync() {
  // æäº¤ä»»åŠ¡
  const taskResult = await client.submitVideoTask({
    prompt: "ä¸€åªå¯çˆ±çš„çŒ«å’ªåœ¨è‰åœ°ä¸Šç©è€",
    req_key: "jimeng_vgfm_t2v_l20"
  });
  
  console.log('ä»»åŠ¡ID:', taskResult.task_id);
  
  // è½®è¯¢ä»»åŠ¡ç»“æœ
  let result;
  do {
    // ç­‰å¾…60ç§’å†æŸ¥è¯¢ï¼ˆç¬¦åˆAPIé™åˆ¶ï¼‰
    await new Promise(resolve => setTimeout(resolve, 60000));
    
    // æŸ¥è¯¢ä»»åŠ¡ç»“æœ
    result = await client.getVideoTaskResult(taskResult.task_id);
    console.log('ä»»åŠ¡çŠ¶æ€:', result.status);
    
  } while (result.status === 'PENDING' || result.status === 'RUNNING');
  
  if (result.success && result.status === 'SUCCEEDED') {
    console.log('è§†é¢‘URL:', result.video_urls);
  } else {
    console.error('ç”Ÿæˆå¤±è´¥:', result.error);
  }
}

// å›¾ç”Ÿè§†é¢‘å¼‚æ­¥æ–¹å¼
async function generateImageToVideoAsync() {
  // æäº¤ä»»åŠ¡
  const taskResult = await client.submitI2VTask({
    image_urls: ["https://example.com/image.jpg"],
    prompt: "æ³¢æµªæ•ˆæœ",
    req_key: "jimeng_vgfm_i2v_l20"
  });
  
  console.log('ä»»åŠ¡ID:', taskResult.task_id);
  
  // æŸ¥è¯¢ä»»åŠ¡ç»“æœï¼ˆç®€åŒ–ç¤ºä¾‹ï¼Œå®é™…åº”ç”¨éœ€è¦è½®è¯¢ï¼‰
  const result = await client.getVideoTaskResult(taskResult.task_id, "jimeng_vgfm_i2v_l20");
  
  if (result.success && result.status === 'SUCCEEDED') {
    console.log('è§†é¢‘URL:', result.video_urls);
  }
}
```

## Dockeréƒ¨ç½²

åˆ›å»ºä»¥ä¸‹Dockerfileï¼š

```dockerfile
FROM node:16-alpine

RUN npm install -g jimeng-ai-mcp

ENV JIMENG_ACCESS_KEY=ä½ çš„ç«å±±å¼•æ“è®¿é—®å¯†é’¥
ENV JIMENG_SECRET_KEY=ä½ çš„ç«å±±å¼•æ“å¯†é’¥

CMD ["jimeng-ai-mcp"]
```

æ„å»ºå¹¶è¿è¡Œï¼š

```bash
docker build -t jimeng-ai-mcp .
docker run -i --rm jimeng-ai-mcp
```

## å¼€å‘æŒ‡å—

### æœ¬åœ°å¼€å‘

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨
npm run dev

# æ„å»º
npm run build

# æµ‹è¯•
npm test

# è¿è¡Œ
npm start
```

### å‘å¸ƒNPMåŒ…

```bash
# æ›´æ–°ç‰ˆæœ¬å·
npm version patch|minor|major

# æ„å»ºé¡¹ç›®
npm run build

# å‘å¸ƒ
npm publish
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è®¤è¯å¤±è´¥**ï¼šæ£€æŸ¥JIMENG_ACCESS_KEYå’ŒJIMENG_SECRET_KEYæ˜¯å¦æ­£ç¡®ã€‚

2. **å›¾åƒæ ¼å¼ä¸æ”¯æŒ**ï¼šç¡®ä¿ä½¿ç”¨JPEG/PNGæ ¼å¼çš„å›¾ç‰‡ï¼Œä¸”URLå¯å…¬å¼€è®¿é—®ã€‚

3. **QPSé™åˆ¶**ï¼šAPIæœ‰QPS=1çš„é™åˆ¶ï¼Œå¤šæ¬¡è°ƒç”¨æ—¶éœ€é—´éš”60ç§’ã€‚

4. **å†…å®¹å®‰å…¨æ£€æŸ¥**ï¼šç¡®ä¿ç”Ÿæˆå†…å®¹ç¬¦åˆå¹³å°å†…å®¹æ”¿ç­–ã€‚

### é”™è¯¯ç åˆ—è¡¨

- `ERR_AUTH_FAILED`: è®¤è¯å¤±è´¥ï¼Œæ£€æŸ¥è®¿é—®å¯†é’¥
- `ERR_TASK_FAILED`: ä»»åŠ¡å¤±è´¥ï¼ŒæŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
- `ERR_INVALID_PARAM`: å‚æ•°æ— æ•ˆï¼Œæ£€æŸ¥è¾“å…¥å‚æ•°
- `ERR_NETWORK`: ç½‘ç»œé”™è¯¯ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥
- `ERR_SERVER`: æœåŠ¡å™¨é”™è¯¯ï¼Œç¨åé‡è¯•

## è´¡çŒ®ä¸æ”¯æŒ

æ¬¢è¿æäº¤é—®é¢˜å’Œæ‹‰å–è¯·æ±‚ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡GitHub Issuesåé¦ˆã€‚

## è®¸å¯è¯

MIT 

## åŠŸèƒ½è¯¦è§£

### å›¾åƒç”Ÿæˆ (generate-image)

ä½¿ç”¨`generate-image`å·¥å…·å¯ä»¥æ ¹æ®æ–‡å­—æè¿°ã€æ’å›¾å…ƒç´ å’Œé¢œè‰²ç”Ÿæˆå›¾åƒï¼š

```json
{
  "text": "åˆ›æ–°æœªæ¥",
  "illustration": "ç§‘æŠ€ã€æ˜Ÿç©ºã€å…‰çº¿",
  "color": "è“è‰²",
  "ratio": "16:9"
}
```

æ”¯æŒçš„å›¾ç‰‡æ¯”ä¾‹ï¼š
- `4:3` - 512Ã—384åƒç´ 
- `3:4` - 384Ã—512åƒç´ 
- `16:9` - 512Ã—288åƒç´ 
- `9:16` - 288Ã—512åƒç´ 

### è§†é¢‘ç”Ÿæˆ (generate-video)

`generate-video`å·¥å…·æ”¯æŒæ ¹æ®æ–‡å­—æè¿°ç”Ÿæˆè§†é¢‘ã€‚**ä»v1.0.5ç‰ˆæœ¬å¼€å§‹ï¼Œè¯¥å·¥å…·é»˜è®¤é‡‡ç”¨å¼‚æ­¥æ–¹å¼**ï¼Œå³ç«‹å³è¿”å›ä»»åŠ¡IDï¼Œç„¶åéœ€è¦ä½¿ç”¨`get-video-task`å·¥å…·æŸ¥è¯¢ç»“æœã€‚

#### å‚æ•°è¯´æ˜

- `prompt` - è§†é¢‘å†…å®¹æè¿°ï¼ˆå¿…å¡«ï¼‰
- `async` - æ˜¯å¦ä½¿ç”¨å¼‚æ­¥æ–¹å¼ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º`true`ï¼‰
- `intent_sync` - æ˜¯å¦æ£€æµ‹åˆ°åŒæ­¥ç”Ÿæˆæ„å›¾ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º`false`ï¼‰

#### è¡Œä¸ºæ¨¡å¼

1. **å¼‚æ­¥æ¨¡å¼**ï¼ˆé»˜è®¤ï¼‰ï¼š
   - ç«‹å³è¿”å›ä»»åŠ¡IDï¼Œä¸ç­‰å¾…è§†é¢‘ç”Ÿæˆå®Œæˆ
   - éœ€è¦åç»­ä½¿ç”¨`get-video-task`å·¥å…·æŸ¥è¯¢ç»“æœ
   - é€‚åˆç”Ÿäº§ç¯å¢ƒå’Œé¿å…è¶…æ—¶çš„åœºæ™¯

   ```json
   {
     "prompt": "ä¸€åªç†ŠçŒ«åœ¨ç«¹æ—ä¸­ç©è€"
   }
   ```

2. **åŒæ­¥æ¨¡å¼**ï¼š
   - ç­‰å¾…è§†é¢‘ç”Ÿæˆå®Œæˆåè¿”å›ç»“æœï¼ˆå¯èƒ½éœ€è¦1-2åˆ†é’Ÿï¼‰
   - æœ‰å¯èƒ½å› ä¸ºç”Ÿæˆæ—¶é—´è¿‡é•¿å¯¼è‡´è¯·æ±‚è¶…æ—¶
   - é€‚åˆæµ‹è¯•å’Œå¿«é€Ÿä½“éªŒ

   è§¦å‘åŒæ­¥æ¨¡å¼çš„æ–¹å¼ï¼š
   - æ˜¾å¼è®¾ç½®`async=false`
   - è®¾ç½®`intent_sync=true`
   - åœ¨æç¤ºä¸­åŒ…å«è¡¨ç¤ºæœŸæœ›å³æ—¶ç»“æœçš„å…³é”®è¯ï¼ˆå¦‚"ä¸€æ¬¡è¾“å‡º"ã€"åŒæ­¥è¾“å‡º"ã€"ç­‰å¾…ç»“æœ"ç­‰ï¼‰

   ```json
   {
     "prompt": "ä¸€åªç†ŠçŒ«åœ¨ç«¹æ—ä¸­ç©è€",
     "async": false
   }
   ```

   æˆ–é€šè¿‡æ„å›¾è¡¨è¾¾ï¼ˆå¤§æ¨¡å‹ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶è®¾ç½®`intent_sync=true`ï¼‰ï¼š
   
   ```
   è¯·å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªç†ŠçŒ«åœ¨ç«¹æ—ä¸­ç©è€çš„è§†é¢‘ï¼Œå¸Œæœ›ä¸€æ¬¡è¾“å‡ºç»“æœ
   ```

#### æœ€ä½³å®è·µ

- å¯¹äºç”Ÿäº§ç¯å¢ƒæˆ–AIåŠ©æ‰‹é›†æˆï¼Œå»ºè®®ä½¿ç”¨é»˜è®¤çš„å¼‚æ­¥æ¨¡å¼
- è§†é¢‘ç”Ÿæˆé€šå¸¸éœ€è¦1-2åˆ†é’Ÿï¼Œå¼‚æ­¥æ¨¡å¼å¯é¿å…è¶…æ—¶é”™è¯¯
- å¦‚æœéœ€è¦åŒæ­¥ç»“æœï¼Œç¡®ä¿è®¾ç½®è¶³å¤Ÿé•¿çš„è¯·æ±‚è¶…æ—¶æ—¶é—´

### åˆ†æ­¥å¼è§†é¢‘ç”Ÿæˆ

å¯¹äºéœ€è¦æ›´ç²¾ç»†æ§åˆ¶çš„åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨åˆ†æ­¥å¼è§†é¢‘ç”Ÿæˆï¼š

1. æäº¤è§†é¢‘ç”Ÿæˆä»»åŠ¡ï¼š

```json
// submit-video-task
{
  "prompt": "ä¸€åªç™½è‰²çš„å°çŒªåœ¨æ²™æ»©ä¸Šè·‘åŠ¨"
}
```

2. ä½¿ç”¨è¿”å›çš„ä»»åŠ¡IDæŸ¥è¯¢ç»“æœï¼š

```json
// get-video-task
{
  "task_id": "12345678901234567890"
}
``` 